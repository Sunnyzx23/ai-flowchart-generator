# AI流程图生成工具 - MVP需求文档

## 1. 产品概述

### 1.1 产品定位
面向产品经理和营销人员的智能业务流程图生成工具，通过AI技术将文字需求转化为专业的业务逻辑流程图。

### 1.2 核心价值
- 从"文字描述"到"可视化流程图"的一键转换
- 生成开发可直接实现的详细流程图，无歧义、无遗漏
- 专注WPS办公软件业务场景，确保流程图的准确性和实用性，之后可拓展至其他非wps类效率办公工具类产品

### 1.3 产品形态
**本产品形态：Web应用**
- **访问方式**：浏览器访问，无需下载安装
- **兼容性**：支持主流浏览器（Chrome、Safari、Edge、Firefox）
- **设备支持**：桌面端为主，兼容平板和手机端访问
- **部署方式**：云端部署，支持多用户并发访问

**选择Web应用的原因：**
- 开发周期短，适合骇客松时间限制
- 无需审核上架，快速迭代
- 跨平台兼容性好
- 便于集成第三方服务（AI API、Draw.io等）

### 1.4 商业化策略

**MVP阶段（骇客松版本）：**
- **用户体系**：无需注册登录，匿名使用
- **使用限制**：无使用次数限制，完全免费
- **目标**：验证产品核心价值和用户需求

**后续商业化规划：**
- **免费版本**：一共限制3次免费生成，基础功能
- **付费版本**：无限次生成，高级功能，优先处理

**选择免费MVP的原因：**
- 降低用户试用门槛，快速获得反馈
- 专注产品功能验证，而非商业化流程
- 骇客松时间有限，避免开发账号和支付系统

### 1.5 目标用户
- **主要用户**：产品经理、营销人员
- **服务对象**：研发团队（流程图的最终使用者）
- **应用场景**：功能需求梳理、业务流程设计、技术方案沟通

## 2. 功能需求

### 2.1 核心功能流程
```
用户输入 → AI智能分析 → 流程图生成 → 交互预览 → 输出选择
                                                    ├─ 直接导出（PNG/PDF/Mermaid源码）
                                                    └─ 导出到Draw.io编辑器（一键跳转优化）
```

**流程说明：**
- **用户输入**：需求描述 + 产品形态选择 + 实现方式选择
- **AI智能分析**：基于Prompt框架进行需求解析和流程设计
- **流程图生成**：输出Mermaid格式的可视化流程图
- **交互预览**：用户预览生成结果，支持缩放查看
- **输出选择**：提供两种路径满足不同需求
  - **直接导出**：适合满意结果的快速使用
  - **Draw.io编辑**：适合需要微调优化的深度编辑

### 2.2 详细功能规格

#### 2.2.1 需求输入模块
**输入方式设计：**

**1. 文本输入**
- 支持直接文本框输入（一句话需求或详细需求描述）
- 文本框支持多行输入，最大字符数限制：5000字
- 支持富文本粘贴和格式保持

**2. 文件上传**
- **支持格式**：.txt、.docx、.pdf、.md
- **文件大小限制**：最大10MB
- **自动解析**：系统自动提取文件中的文本内容并直接使用

**其他选择项：**
- **目标产品形态选择**：用户要生成流程图的目标产品形态
  - Web端/插件端/桌面端/移动端
- **实现方式选择**：
  - ☐ 需要AI能力实现
  - ☐ 传统功能实现  
  - ☐ 不确定（AI分析建议）

**界面设计：**
```
需求输入方式：
○ 直接输入文本    ○ 上传需求文档

[文本输入框] 或 [文件上传区域]
                   上传成功提示：✓ 文件已解析

目标产品形态：[下拉选择]
实现方式：[单选按钮]

[生成流程图]
```

**说明：**
- 我们的工具本身是Web应用
- "目标产品形态"是指用户要为哪种产品设计流程图
- 文件上传后会自动解析并直接进入AI分析流程

**输入验证：**
- 需求描述不少于10字
- 必须选择产品形态和实现方式

#### 2.2.2 智能分析引擎
**基于纯Prompt方案，包含以下分析维度：**

1. **功能触发分析**
   - 主动触发：用户点击入口/菜单
   - 被动触发：系统推荐/智能提醒
   - 场景触发：特定操作后的引导

2. **权限验证流程**
   - 登录状态检查
   - 权限验证逻辑
   - 异常处理（登录失败、权限不足）

3. **核心业务逻辑**
   - 用户操作路径
   - 系统响应逻辑
   - 数据流转过程

4. **AI能力调用**（如选择AI实现）
   - 请求发起和参数传递
   - 等待响应和loading状态
   - 结果处理和错误处理

5. **商业化逻辑**
   - 免费用户限制
   - 试用逻辑设计
   - 付费引导流程
   - 会员特权处理

6. **交互反馈设计**
   - 操作状态反馈
   - 错误提示和引导
   - 成功确认和后续操作

7. **异常处理和降级**
   - 网络异常处理
   - 服务超时处理
   - 降级方案设计

#### 2.2.3 流程图生成模块
**技术实现：**
- 使用Mermaid.js语法生成流程图
- 支持流程图、决策树、泳道图等多种样式
- 自动布局和美化

**输出要求：**
- 节点清晰，包含具体的判断条件
- 分支完整，覆盖所有可能的路径
- 异常处理路径明确标注
- 开发可直接实现，无需二次解读

#### 2.2.4 交互预览和输出模块
**预览功能：**
- 流程图可视化展示
- 支持缩放和平移查看细节
- 实时渲染Mermaid代码

**输出选择：**

**1. 直接导出功能**
- 导出PNG格式（用于文档插入、演示展示）
- 导出PDF格式（用于正式文档分享）
- 复制Mermaid源码（用于其他平台使用）

**2. Draw.io编辑器对接**
- 一键跳转到Draw.io编辑器
- 自动预填充生成的流程图内容
- 支持在Draw.io中进行深度编辑和美化
- 技术实现：通过URL参数传递Mermaid代码

**用户操作界面：**
```
[流程图预览区域]

操作按钮：
[重新生成] [导出PNG] [导出PDF] [在Draw.io中编辑] [复制源码]
```

**MVP版本不包含：**
- 本地节点拖拽编辑
- 历史记录存储
- 用户账号系统
- 多个外部编辑器对接（仅支持Draw.io）

## 3. 技术方案

### 3.1 技术架构
```
前端：React + Mermaid.js + Tailwind CSS
后端：Node.js + Express + 国内AI模型API + 文件解析库
部署：GitHub Actions + 国内云服务
存储：临时文件存储（用于文件上传处理，无需用户数据存储）
```

**MVP架构特点：**
- 无数据库：不存储用户数据，降低复杂度
- 无用户系统：匿名访问，专注核心功能
- 轻量化部署：快速上线，易于维护

**文件解析技术栈：**
- **PDF解析**：pdf-parse 或 pdf2pic + OCR
- **Word文档解析**：mammoth.js 或 docx-parser
- **文本文件**：直接读取
- **Markdown文件**：markdown-it 解析

### 3.2 AI模型选择
- **主选方案**：阿里通义千问API
- **备选方案**：百度文心一言API
- **调用方式**：RESTful API

### 3.3 Draw.io对接技术方案

**实现方式：**
- 通过URL参数将Mermaid代码传递给Draw.io
- 用户点击"在Draw.io中编辑"按钮后自动打开新窗口
- Draw.io自动解析并渲染传入的Mermaid内容

**技术实现代码：**
```javascript
function openInDrawio(mermaidCode) {
    const drawioUrl = `https://app.diagrams.net/?lightbox=1&edit=_blank&format=mermaid&data=${encodeURIComponent(mermaidCode)}`;
    window.open(drawioUrl, '_blank');
}
```

**开发工作量评估：**
- 前端界面和交互：1天
- 后端API和文件解析：1天
- Draw.io对接功能：0.5天
- 测试和优化：0.5天
- **总计：3天**

**MVP开发优势：**
- 无需开发用户注册/登录系统（节省2-3天）
- 无需开发支付系统（节省2-3天）
- 无需数据库设计和管理（节省1天）
- 专注核心AI生成功能

### 3.4 核心Prompt设计框架
```
请基于以下需求生成详细的产品流程图：
需求：[用户输入]
产品形态：[用户选择]
实现方式：[AI能力/传统功能]

输出要求：开发可直接实现，包含以下必要元素：
1. 功能入口和触发条件
2. 用户身份验证流程
3. 权限检查和异常处理  
4. 核心业务逻辑步骤
5. [如选择AI]AI调用的完整流程
6. 商业化判断节点
7. 用户交互反馈
8. 异常情况和降级方案
9. 数据保存和同步逻辑
10. 流程结束和后续引导

输出格式：Mermaid流程图语法
```
### 3.4 Prompt设计示例
**输入示例：**
需求：用户在WPS文档中使用AI写作助手功能
产品形态：桌面端
实现方式：需要AI能力实现

**预期输出：**
包含触发方式、登录验证、AI调用、结果处理、商业化卡点的完整流程图

## 4. 时间规划（8月11日-8月20日）

### 4.1 开发计划
**8月11日-8月13日（3天）：**
- 产品：完成Prompt设计和测试
- 开发：前端界面开发，后端API框架搭建
- 增长：竞品调研，演示策划

**8月14日-8月17日（4天）：**
- 产品：Prompt优化，准备测试用例
- 开发：AI模型集成，核心功能开发
- 增长：产品包装，演示材料准备

**8月18日-8月20日（3天）：**
- 联调测试，bug修复
- 演示准备，最终优化

### 4.2 里程碑
- 8月13日：基础功能demo可运行
- 8月17日：完整功能开发完成
- 8月19日：测试完成，准备演示
- 8月20日：最终提交

## 5. 验收标准

### 5.1 功能验收
- [ ] 用户可以通过文本输入或文件上传的方式提供需求
- [ ] 支持.txt、.docx、.pdf、.md格式文件上传和解析
- [ ] 文件上传后能正确解析并显示文本内容
- [ ] 用户可以选择目标产品形态和实现方式
- [ ] 系统能够生成符合WPS业务特点的详细流程图
- [ ] 流程图包含完整的业务逻辑和异常处理
- [ ] 支持导出PNG和PDF格式
- [ ] 支持复制Mermaid源码
- [ ] 支持一键跳转到Draw.io编辑器
- [ ] Draw.io能够正确解析和渲染传入的流程图内容
- [ ] 响应时间<10秒（不包含文件上传时间）

### 5.2 质量标准
- [ ] 生成的流程图开发可直接实现
- [ ] 覆盖90%以上的常见异常情况
- [ ] 界面简洁易用，操作流程不超过3步
- [ ] 支持主流浏览器（Chrome、Safari、Edge）

### 5.3 质量保证措施
- [ ] Prompt测试：准备至少10个不同类型的需求进行测试
- [ ] 输出一致性：相同需求多次生成结果的一致性>80%
- [ ] 专业评审：产品经理和开发共同验收流程图的可实现性

## 6. 风险和应对

### 6.1 技术风险
- **AI模型调用失败**：准备备选API，设置重试机制
- **生成质量不稳定**：持续优化Prompt，准备人工审核机制

### 6.2 时间风险
- **开发时间不足**：优先保证核心功能，砍掉非必要特性
- **测试时间紧张**：并行开发和测试，重点测试核心路径

---

## 附录：讨论记录摘要

### 核心决策点
1. **聚焦策略**：专注产品经理和营销人员，暂不做技术架构图
2. **技术选择**：纯Prompt方案，不使用复杂模板库
3. **用户选择**：产品形态 + AI能力使用 由用户主动选择
4. **质量保证**：确保生成的流程图开发可直接实现

### 关键创新点
- 基于WPS业务特点的专业化流程图生成
- 考虑商业化逻辑的完整业务流程
- 多产品形态的差异化处理
- 准确性优先的设计理念
- **AI生成 + 专业编辑的完整解决方案**：通过Draw.io对接实现"一键生成，深度编辑"
- **MVP功能最大化**：在有限开发时间内提供完整的编辑能力

---

*文档创建时间：2024年8月11日*
*预计交付时间：2024年8月20日*
```



DEEPSEEK_API_KEY=sk-894ae1e978ce45239084604440efd1f5



1、用户在wps office的pc客户端，打开一个pdf文档，点击导航上的ai全文对照翻译入口，判断用户登录态，登录后，判断用户qi权益，使用全文翻译功能，请输出这个全文翻译功能的使用和商业化的流程图

2、用户在wps office的pc客户端，打开一个pdf文档，点击导航上的ai全文对照翻译入口，判断用户登录态，如果没有登录，展示机翻对照结果，如果已登录，判断用户的ai会员状态，如果是会员则默认展示ai翻译结果，如果不是ai会员，则默认展示2页对照翻译结果，当未登录及登录非ai会员，下滑查看超过2页对照翻译结果，则出现付费卡点，另外下载导出为付费权益，要判断用户会员状态，切换ai模型只能预览前2页 ，请输出这个全文翻译功能的使用和商业化的流程图

3、我想要做一个健身的app，这个app的主要作用是，用户通过上传自己的照片，ai识别照片，分析用户体型和体态，然后生成对应锻炼后的照片效果，用户看到照片效果过，点击获取健身计划方案，然后再请求ai，生成对应锻炼后照片效果的健身计划，提供居家健身计划，和健身房健身计划，可以提供1～3次的免费体验流程生成健身计划的机会


4、我想做一个健身app，请帮我分析设计这个健身app的业务流程，这是一个专门给女性设计的健身方案app，提供居家练习和健身房练习方案的生成，使用ai生成

5、我想做一个图片翻译的web app，先提供这一个图片翻译的功能，可以支持多张图片导入翻译，并提供10张免费翻译额度，请帮我设计业务流程图